<% if controller_name == "pages" && action_name == "habit" %>
  <div class="menu-container" id="menu-habit">
    <div class="menu menu-addon">
      <div class="menu-top-section">
        <div class="menu-addon-left">

          <% if @num_habit_checked == 0 %>
            <p id="progress-text">No habits checked</p>
          <% elsif @num_habit_checked == @num_habit_checkable %>
            <p id="progress-text">All habits checked</p>
          <% else %>
            <p id="progress-text"><%= @num_habit_checked %> out of <%= @num_habit_checkable %> habits checked</p>
          <% end %>


          <div class="progress" style="height: 6px;">
            <div id='progress-bar' class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: <%= @num_habit_checked.to_f / @num_habit_checkable *100 %>%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>

        <div id="mass-section">
          <% if @can_mass_create %>
            <%= render "shared/mass_create_button", display: true %>
            <i id='addon-uncheckable' class="fas fa-check-circle d-none"></i>
          <% else %>
            <%= render "shared/mass_create_button", display: false %>
            <i id='addon-uncheckable' class="fas fa-check-circle"></i>
          <% end %>
        </div>

      </div>
      <hr>

      <!-- Regular Menu -->
      <ul class="icons">
        <%  if current_user %>
          <%= link_to user_path(current_user.id), class: "icon-label" do %>
            <% @active = @link_active == 'home' ? 'active' : '' %>
            <span class="iconify <%= @active %>" data-icon="ant-design:home-twotone" data-inline="false" data-width="30" data-height="30"></span>
            <span class="<%= @active %>">Home</span>
          <% end %>
        <% end %>

        <%= link_to categories_path, class: "icon-label" do %>
          <% @active = @link_active == 'search' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="ant-design:search-outlined" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Search</span>
        <% end %>

        <%= link_to dashboard_path, class: "icon-label" do %>
          <% @active = @link_active == 'dashboard' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="mdi-light:format-list-checks" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Challenges</span>
        <% end %>

        <%= link_to habit_path, class: "icon-label" do %>
          <% @active = @link_active == 'habit' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="ant-design:carry-out-twotone" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Habits</span>
        <% end %>

        <%= link_to buddy_challenges_path, class: "icon-label notification-bounce" do %>
          <% if current_user.notification_count > 0 %>
            <span class="buddy-notification-badge"><%= current_user.notification_count %></span>
          <% end %>
          <% @active = @link_active == 'buddy' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="ic:twotone-people-alt" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Buddy</span>
        <% end %>
      </ul>
    </div>
  </div>

<% elsif (
  (controller_name == 'sessions') ||
  (controller_name == 'registrations') ||
  (controller_name == 'passwords') ||
  (controller_name == "pages" && action_name == "home")
)%>

<!-- no menu rendered -->

<% else %>

  <div class="menu-container">
    <div class="menu">
      <ul class="icons">
        <%  if current_user %>
          <%= link_to user_path(current_user.id), class: "icon-label" do %>
            <% @active = @link_active == 'home' ? 'active' : '' %>
            <span class="iconify <%= @active %>" data-icon="ant-design:home-twotone" data-inline="false" data-width="30" data-height="30"></span>
            <span class="<%= @active %>">Home</span>
          <% end %>
        <% end %>

        <%= link_to categories_path, class: "icon-label" do %>
          <% @active = @link_active == 'search' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="ant-design:search-outlined" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Search</span>
        <% end %>

        <%= link_to dashboard_path, class: "icon-label" do %>
          <% @active = @link_active == 'dashboard' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="mdi-light:format-list-checks" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Challenges</span>
        <% end %>

        <%= link_to habit_path, class: "icon-label" do %>
          <% @active = @link_active == 'habit' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="ant-design:carry-out-twotone" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Habits</span>
        <% end %>

        <%= link_to buddy_challenges_path, class: "icon-label notification-bounce" do %>
          <% if current_user.notification_count > 0 %>
            <span class="buddy-notification-badge"><%= current_user.notification_count %></span>
          <% end %>
          <% @active = @link_active == 'buddy' ? 'active' : '' %>
          <span class="iconify <%= @active %>" data-icon="ic:twotone-people-alt" data-inline="false" data-width="30" data-height="30"></span>
          <span class="<%= @active %>">Buddy</span>
        <% end %>
      </ul>
    </div>
  </div>

<% end %>

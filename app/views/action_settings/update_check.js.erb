// AJAX for Habit Page checking unchecking! => BEGIN

habit = document.getElementById('habit-<%= @setting.id %>');
isChecked = habit.classList.contains('habit-checkbox-checked');

// AJAX habits checked or unchecked
if (isChecked) {
  habit.classList.remove('fa-check-circle', 'fas', 'habit-checkbox-checked');
  habit.classList.add('fa-circle', 'far', 'habit-checkbox-unchecked');
} else {
  habit.classList.remove('fa-circle', 'far', 'habit-checkbox-unchecked');
  habit.classList.add('fa-check-circle', 'fas', 'habit-checkbox-checked');
}

checked = document.querySelectorAll('.habit-checkbox-checked').length;
unchecked = document.querySelectorAll('.habit-checkbox-unchecked').length;
progress = parseFloat(checked / (unchecked + checked));

// AJAX Prograss Bar
progressBar = document.getElementById('progress-bar');
progressBar.style.width = `${progress *100}%`;

// AJAX Progress text
progressText = document.getElementById('progress-text');
if (checked === 0) {
  progressText.innerText = 'No habits checked';
} else if (checked === (unchecked + checked)) {
  progressText.innerText = 'All habits checked';
} else {
  progressText.innerText = `${checked} out of ${checked + unchecked} habits checked`;
}

// AJAX Mass-Create Button
massSection = document.getElementById('mass-section');

uncheckable = massSection.querySelector("#addon-uncheckable");
checkable = massSection.querySelector("#habit-bottom-btn");



if (checked === 0) {
  // fullLink = `<i id='addon-uncheckable' class="fas fa-check-circle"></i>`;
  // massSection.innerHTML = fullLink;
  uncheckable.classList.remove("d-none");
  checkable.classList.add("d-none");
} else {
  // massSection.innerHTML = '<%= j render "shared/mass_create_button" %>';
  uncheckable.classList.add("d-none");
  checkable.classList.remove("d-none");
}

// AJAX for Habit Page => END

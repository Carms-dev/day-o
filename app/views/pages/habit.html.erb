<%= content_for(:title) { "Habits" } %>

<div class="container">
  <div class="row d-flex justify-content-center">
    <div class="col-xs-12">

      <div class="cards-habits">
        <% (@habits.sort_by { |obj| obj.created_at }).each do |habit| %>
          <div class="card-habit">
            <div class="info-habit">
              <h5><%= habit.action.title %></h5>
              <p>Impact: <%= habit.action.impact %>g CO2</p>
            </div>
            <div class="options-babit">
              <div class="buttons-action">
                <% if habit.done_today? %>
                  <p>DONE</p>
                  <i class="fas fa-check" style="margin-left: 3px; color: #4C6C6F; font-size: 25px;"></i>
                <% else %>
                  <%= link_to update_check_action_setting_path(habit), method: :patch do %>
                    <% if habit.checked %>
                      <i class="fas fa-check-circle" style="color: lightgray; font-size: 30px;"></i>
                    <% else %>
                      <i class="far fa-circle" style="color: lightgray; font-size: 30px;"></i>
                    <% end %>
                  <% end %>
                <% end %>
              </div>

              <!-- dropdown -->
              <div class="dropdown">
                <a href="#" data-toggle="dropdown"><i id="three-dots" class="fas fa-ellipsis-v"></i></a>
                <div class="dropdown-menu dropdown-menu-right">
                    <%= link_to 'Done', action_action_completions_path(habit.action), method: :post, class: 'dropdown-item' %>
                    <%= link_to 'Remove', action_setting_path(habit), method: :patch, class: 'dropdown-item' %>
                </div>
              </div>
            </div>

          </div>

        <% end %>
      </div>

    </div>
  </div>

</div>

